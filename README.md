# enki

[![MIT license](https://img.shields.io/badge/License-MIT-blue.svg)](https://lbesson.mit-license.org/)
[![Go Reference](https://pkg.go.dev/badge/github.com/ricdeau/enki.svg)](https://pkg.go.dev/github.com/ricdeau/enki)
[![Build Status](https://travis-ci.org/ricdeau/enki.svg?branch=master)](https://travis-ci.org/github/ricdeau/enki)
[![codecov](https://codecov.io/gh/ricdeau/enki/branch/master/graph/badge.svg?token=R1SRKIVD5Z)](https://codecov.io/gh/ricdeau/enki)
[![Go Report Card](https://goreportcard.com/badge/github.com/ricdeau/enki)](https://goreportcard.com/report/github.com/ricdeau/enki)

`enki` is a package for easy go files generation

## Example

```go
func main() {
    f := NewFile()
    f.Package("enki")
    f.GeneratedBy("enki")
    f.AddImport("", "fmt")
    f.Line("// Number type redefined")
    f.Type("Number").Is(Int).Materialize()
    
    f.NewLine()
    f.Type("NumStruct").Struct(func(s Statement) {
        s.Line("a, b " + Int)
    }).Materialize()
    
    f.NewLine()
    f.Type("Num").Interface(Methods{
        func(f FunctionDef) {
            f.Name("AsNumber").Returns(Str)
        },
        func(f FunctionDef) {
            f.Name("Sum").Params(Int).Returns(Int)
        },
    }).Materialize()
    
    f.NewLine()
    f.Function("AsNumber").Returns(Str).(Method).Receiver("n Number").Body(func(sb Statement) {
        sb.Line("return fmt.Sprint(n)")
    }).Materialize()
    
    f.NewLine()
    f.Function("Sum").Params("x int").Returns(Int).(Method).Receiver("n Number").Body(func(sb Statement) {
        sb.Line("return int(n) + x")
    }).Materialize()
    
    f.NewLine()
    f.Function("Sum").Returns(Int).(Method).Receiver("ns NumStruct").Body(func(sb Statement) {
        sb.Line("return ns.a + ns.b")
    }).Materialize()
    
    f.NewLine()
    f.Function("sum").Params("a, b " + Float32).Returns("s " + Float64).(Function).Body(func(sb Statement) {
        sb.Line("return @1(a + b)", Float64)
    }).Materialize()

    _ = f.Write(os.Stdout)
}
```

Output:
```go
// Code generated by enki. DO NOT EDIT.

package enki

import (
	"fmt"
)

// Number type redefined
type Number int

type NumStruct struct {
	a, b int
}

type Num interface {
	AsNumber() string
	Sum(int) int
}

func (n Number) AsNumber() string {
	return fmt.Sprint(n)
}

func (n Number) Sum(x int) int {
	return int(n) + x
}

func (ns NumStruct) Sum() int {
	return ns.a + ns.b
}

func sum(a, b float32) (s float64) {
	return float64(a + b)
}
```